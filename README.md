# ESP32-S3 WiFi Application

## Overview

This project provides a WiFi-enabled application on the ESP32-S3 DevKitC-1 that includes RGB LED control, HTTP server 
functionality, and FreeRTOS task management for system events. The RGB LED indicates various system states by adjusting 
color channels (Red, Green, Blue) based on the system’s status, such as WiFi initialization, server startup, and 
connection status.

The application initializes as an Access Point (AP) to allow other devices to connect, providing a user interface to 
view device data (e.g., sensor readings, connection info, local time) and manage settings. Once connected, users can 
access a web page hosted by the ESP32's HTTP server. The project leverages ESP-IDF APIs for seamless WiFi management, 
using FreeRTOS queues and tasks for event handling, making the application responsive and scalable.

Key functionalities include:
- Setting up an Access Point with configurable SSID, IP, and network details.
- Hosting an HTTP server to serve a web page with device information and settings.
- Using RGB LEDs to visually represent system states.
- Implementing FreeRTOS tasks to manage WiFi events and system notifications efficiently.

## WiFi Implementation 

- The ESP32 should start its Access Point so that other devices can connect to it.
  - This enables users to access information (e.g., sensor data, device info, connection status/information, user option 
  to connect and disconnect from an AP, display local time, etc.)
- The WiFi application will start an HTTP Server, which will support a web page.
- The application will contain a FreeRTOS task that accepts FreeRTOS Queue messages (`xQueueCreate`, `xQueueSend`, and 
`xQueueReceive`) for event coordination.
- Connect the ESP32 using previously saved credentials.

## ESP-IDF APIs used

- Configuration steps and ESP-DF APIs used
  - **Define WiFi settings**: Header file with SSID, Password, IP, Gateway, Netmask, etc.
  - **Define WiFi FreeRTOS task**: Use `xTaskCreatePinnedToCore` or `xTaskCreate`.
  - **Create an event handler**: Call `esp_event_handler_instance_register`.
  - **Implement default configure**: Initialize TCP/IP stack using `esp_netif_init` and WiFi configuration by calling 
  `esp_wifi_init`, `esp_wifi_set_storage`, and default configurations `esp_netif_create_default_wifi_ap`, 
  `esp_netif_create_default_wifi_sta`.
  - **Define ESP32 SoftAP configuration**: Define AP Settings `wifi_config_t` struct and static IP. APIs used:
    - `esp_netif_set_ip_info`
    - `esp_netif_dhcs_start`
    - `esp_wifi_set_mode`
    - `esp_wifi_set_config`
    - `esp_wifi_set_bandwidth`
    - `esp_wifi_set_ps`
  - Start Wifi (`esp_wifi_start`)

## RGB Status Functions

The following status functions update the RGB color to indicate the system's current state:

- **WiFi Started**: Sets RGB to (255, 102, 255) - indicating WiFi initialization.
- **HTTP Server Started**: Sets RGB to (204, 255, 255) - showing the HTTP server is up.
- **WiFi Connected**: Sets RGB to (0, 255, 153) - confirming a successful WiFi connection.

Each status update calls `rgb_set_color()` with the appropriate RGB values.

## Hardware Setup

This project utilizes common anode or cathode RGB LEDs. Ensure the correct wiring and configuration based on the LED 
type:

- **Common Anode**: Connect the common pin to VCC.
- **Common Cathode**: Connect the common pin to GND.

### Connecting DevKit to RGB LED

**1. Identify the RGB LED Pins:**

- **Common Cathode Pin:** Typically the longest lead; connects to ground (GND).
- **Red (R) Pin:** Controls the red color.
- **Green (G) Pin:** Controls the green color.
- **Blue (B) Pin:** Controls the blue color.

**2. Select GPIO Pins on the ESP32-S3:**
Choose GPIO pins capable of Pulse Width Modulation (PWM) to control the LED colors. For this project, we're using:

- **Red:** GPIO 19
- **Green:** GPIO 20
- **Blue:** GPIO 21

```
// RGD LED GPIOs
#define RGB_LED_RED_GPIO   19
#define RGB_LED_GREEN_GPIO 20
#define RGB_LED_BLUE_GPIO  21
```

**3. Connect the RGB LED to the ESP32-S3:**

- **Common Cathode Pin:** Connect to one of the GND pins on the ESP32-S3.
- **Red Pin:** Connect to GPIO 19 through a current-limiting resistor (e.g., 220Ω).
- **Green Pin:** Connect to GPIO 20 through a current-limiting resistor.
- **Blue Pin:** Connect to GPIO 21 through a current-limiting resistor.

## ESP-IDF Setup Instructions

Setup instructions can be found here: [ESP-IDF Programming Guide][esp-idf-programming-guide].

## Features

## Usage

## Folder Structure

```
.
├── build                        # This folder is generated after running the build command and contains compiled files, object files, and executable binaries. Typically, you won’t need to edit files here, as they are auto-generated by the build system.
├── CMakeLists.txt               # The main CMake configuration file for the entire project. It includes settings and configurations for building each component and the main application.
├── components                   # This folder holds modular components of the project, each with its own code, configuration, and dependencies.
│     ├── component1
│     │     ├── CMakeLists.txt   # CMake configuration file specific to 'component1.' It lists source files, libraries, and dependencies for building this component.
│     │     ├── Kconfig          # Configuration options for 'component1.' This file defines user-selectable settings that integrate with the ESP-IDF menuconfig system, allowing customization of component behavior.
│     │     └── src1.c           # Source code for 'component1,' containing the logic and functionality specific to this module.
│     └── component2
│         ├── CMakeLists.txt     # CMake configuration for 'component2,' defining its build instructions and dependencies.
│         ├── include
│         │     └── component2.h # Header file for 'component2,' containing declarations for functions, macros, and structures accessible from other parts of the project.
│         ├── Kconfig            # Configuration options for 'component2,' enabling settings for menuconfig integration.
│         └── src2.c             # Source code for 'component2,' implementing its core functionality.
├── documentation                # This folder is designated for project documentation. It may contain guides, technical specs, or API documentation to assist users in understanding and using the project.
├── main                         # This folder holds the main application code, serving as the entry point for the project.
│     ├── CMakeLists.txt         # CMake configuration for the main application code, defining source files and dependencies for the core functionality.
│     ├── src1.c                 # Main application source file 1, typically containing setup or initialization code.
│     └── src2.c                 # Main application source file 2, potentially containing additional logic for the primary application.
├── README.md                    # Overview of the project, including setup instructions, features, and usage information. It's often the first reference for new users.
├── sdkconfig                    # A configuration file generated by ESP-IDF’s menuconfig tool, containing project-specific settings like pin configurations and component options.
```

[esp-idf-programming-guide]: https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/index.html
